<!-- START BREADCRUMB -->
<ul class="breadcrumb">
    <li><a href="<?php echo base_url() ?>">Home</a></li>                    
    <li class="active">Dashboard</li>
</ul>
<!-- END BREADCRUMB -->                       

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

    <!-- START WIDGETS -->                    
    <div class="row">
        
        <div class="col-md-2">

            <!-- START WIDGET SLIDER -->
            <div class="widget widget-default widget-carousel">
                <div class="owl-carousel" id="owl-example">
                    <div>                                    
                        <div class="widget-title"><div id="totaltitle"></div></div>                                                                        
                        <div class="widget-subtitle"><div id="totalsubtitle"></div></div>
                        <div class="widget-int"><div id="totaldata"></div></div>
                    </div> 
                </div>                            
                <div class="widget-controls">                                
                    <a href="#" class="widget-control-right widget-remove" data-toggle="tooltip" data-placement="top" title="Remove Widget"><span class="fa fa-times"></span></a>
                </div>                             
            </div>         
            <!-- END WIDGET SLIDER -->

        </div>

        <div class="col-md-2">

            <!-- START WIDGET SLIDER -->
            <div class="widget widget-default widget-carousel">
                <div class="owl-carousel" id="owl-example">
                     <div>                                    
                        <div class="widget-title"><div id="pendingtitle"></div></div>                                                                        
                        <div class="widget-subtitle"><div id="pendingsubtitle"></div></div>
                        <div class="widget-int"><div id="pendingdata"></div></div>
                    </div>
                </div>    
                
                <div class="widget-controls">                                
                    <a href="#" class="widget-control-right widget-remove" data-toggle="tooltip" data-placement="top" title="Remove Widget"><span class="fa fa-times"></span></a>
                </div> 
                
            </div>         
            <!-- END WIDGET SLIDER -->

        </div>
        
        <div class="col-md-2">

            <!-- START WIDGET SLIDER -->
            <div class="widget widget-default widget-carousel">
                <div class="owl-carousel" id="owl-example">
                    <div>                                    
                        <div class="widget-title"><div id="holdtitle"></div></div>                                                                        
                        <div class="widget-subtitle"><div id="holdsubtitle"></div></div>
                        <div class="widget-int"><div id="holddata"></div></div>
                    </div> 
                    <div>                                    
                        <div class="widget-title"><div id="resolvedtitle"></div></div>                                                                        
                        <div class="widget-subtitle"><div id="resolvedsubtitle"></div></div>
                        <div class="widget-int"><div id="resolveddata"></div></div>
                    </div>
                </div>    
                
                <div class="widget-controls">                                
                    <a href="#" class="widget-control-right widget-remove" data-toggle="tooltip" data-placement="top" title="Remove Widget"><span class="fa fa-times"></span></a>
                </div> 
                
            </div>         
            <!-- END WIDGET SLIDER -->

        </div>
        
        <div class="col-md-2">

            <!-- START WIDGET SLIDER -->
            <div class="widget widget-default widget-carousel">
                <div class="owl-carousel" id="owl-example">
                     <div>                                    
                        <div class="widget-title"><div id="todaytitle"></div></div>                                                                        
                        <div class="widget-subtitle"><div id="todaysubtitle"></div></div>
                        <div class="widget-int"><div id="todaydata"></div></div>
                    </div>
                </div>    
                
                <div class="widget-controls">                                
                    <a href="#" class="widget-control-right widget-remove" data-toggle="tooltip" data-placement="top" title="Remove Widget"><span class="fa fa-times"></span></a>
                </div> 
                
            </div>         
            <!-- END WIDGET SLIDER -->

        </div>
        
        <div class="col-md-2">

            <!-- START WIDGET SLIDER -->
            <div class="widget widget-default widget-carousel">
                <div class="owl-carousel" id="owl-example">
                     <div>                                    
                        <div class="widget-title"><div id="todaypendingtitle"></div></div>                                                                        
                        <div class="widget-subtitle"><div id="todaypendingsubtitle"></div></div>
                        <div class="widget-int"><div id="todaypendingdata"></div></div>
                    </div>
                </div>    
                
                <div class="widget-controls">                                
                    <a href="#" class="widget-control-right widget-remove" data-toggle="tooltip" data-placement="top" title="Remove Widget"><span class="fa fa-times"></span></a>
                </div> 
                
            </div>         
            <!-- END WIDGET SLIDER -->

        </div>
        
        <div class="col-md-2">

            <!-- START WIDGET CLOCK -->
            <div class="widget widget-info widget-padding-sm">
                <div class="widget-big-int plugin-clock">00:00</div>                            
                <div class="widget-subtitle plugin-date">Loading...</div>
                <div class="widget-controls">                                
                    <a href="#" class="widget-control-right widget-remove" data-toggle="tooltip" data-placement="left" title="Remove Widget"><span class="fa fa-times"></span></a>
                </div>                            
                <div class="widget-buttons widget-c3">
                    <div class="col">
                        <a href="#"><span class="fa fa-clock-o"></span></a>
                    </div>
                    <div class="col">
                        <a href="#"><span class="fa fa-bell"></span></a>
                    </div>
                    <div class="col">
                        <a href="#"><span class="fa fa-calendar"></span></a>
                    </div>
                </div>                            
            </div>                        
            <!-- END WIDGET CLOCK -->
        </div>
        
    </div>
    <!-- END WIDGETS --> 

     <!-- <div class="row">
        
        <div class="col-md-12">

                <div class="panel panel-default">

                    <div class="panel-heading">
                        <div class="panel-title-box">
                            <h3>Item Current Stock</h3>
                            <span>Stock</span>
                        </div>                                    
                        <ul class="panel-controls" style="margin-top: 2px;">
                            <li><a href="#" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>
                            <li><a href="#" class="panel-refresh"><span class="fa fa-refresh"></span></a></li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-cog"></span></a>                                        
                                <ul class="dropdown-menu">
                                    <li><a href="#" class="panel-collapse"><span class="fa fa-angle-down"></span> Collapse</a></li>
                                    <li><a href="#" class="panel-remove"><span class="fa fa-times"></span> Remove</a></li>
                                </ul>                                        
                            </li>                                        
                        </ul>
                    </div>


                    <div class="panel-body panel-body-table">

                        <div class="table-responsive">
                            <table id='itemstock' class="table table-bordered">
                                <thead>
                                     <tr>
                                        <th>Item ID</th>
                                        <th>Item Name</th>
                                        <th>Current Stock</th>
                                        <th>Reorder Level</th>
                                    </tr>
                                </thead>

                                <tbody id='itemstockdata'>
                                    <tr>
                                        <td colspan="11">No Details found</td> 
                                    </tr>   
                                </tbody>

                            </table>
                        </div>
                        
                    </div>

                </div>

        </div>
        
    </div> -->
    
    <div class="row">
        
        <div class="col-md-12">

                <div class="panel panel-default">

                    <div class="panel-heading">
                        <div class="panel-title-box">
                            <h3>Pending Tickets</h3>
                            <span>Help Desk</span>
                        </div>                                    
                        <ul class="panel-controls" style="margin-top: 2px;">
                            <li><a href="#" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>
                            <li><a href="#" class="panel-refresh"><span class="fa fa-refresh"></span></a></li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-cog"></span></a>                                        
                                <ul class="dropdown-menu">
                                    <li><a href="#" class="panel-collapse"><span class="fa fa-angle-down"></span> Collapse</a></li>
                                    <li><a href="#" class="panel-remove"><span class="fa fa-times"></span> Remove</a></li>
                                </ul>                                        
                            </li>                                        
                        </ul>
                    </div>


                    <div class="panel-body panel-body-table">

                        <div class="table-responsive">
                            <table id='pendingtickets' class="table table-bordered">
                                <thead>
                                     <tr>
                                        <th width="5%">Incident #</th>
                                        <th width="10%">Logged On Date</th>
                                        <th width="10%">SLA Resolved On</th>
                                        <th width="20%">Problem</th>
                                        <th width="10%">User</th>
                                        <th width="5%">Location</th>
                                        <th width="10%">Department</th>
                                        <th width="5%">Severity</th>
                                        <th width="7%">Owner</th>
                                        <th width="3%">Days</th>
                                        <th width="15%">Status Reason</th>
                                        <th width="5%">Status</th>
                                    </tr>
                                </thead>

                                <tbody id='pendingticketsdata'>
                                    <tr>
                                        <td colspan="11">No Details found</td> 
                                    </tr>   
                                </tbody>

                            </table>
                        </div>
                        
                    </div>

                </div>

        </div>
        
    </div>
    
    <div class="row">

        <div class="col-md-12">

            <div class="panel panel-default">

                <div class="panel-heading">
                    <div class="panel-title-box">
                        <h3>Hold Tickets</h3>
                        <span>Help Desk</span>
                    </div>                                    
                    <ul class="panel-controls" style="margin-top: 2px;">
                        <li><a href="#" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>
                        <li><a href="#" class="panel-refresh"><span class="fa fa-refresh"></span></a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-cog"></span></a>                                        
                            <ul class="dropdown-menu">
                                <li><a href="#" class="panel-collapse"><span class="fa fa-angle-down"></span> Collapse</a></li>
                                <li><a href="#" class="panel-remove"><span class="fa fa-times"></span> Remove</a></li>
                            </ul>                                        
                        </li>                                        
                    </ul>
                </div>

                <div class="panel-body panel-body-table">

                    <div class="table-responsive">
                        <table id='holdtickets'  class="table table-bordered table-striped">
                            <thead>
                                    <tr>
                                        <th width="5%">Incident #</th>
                                        <th width="10%">Date</th>
                                        <th width="20%">Problem</th>
                                        <th width="10%">User</th>
                                        <th width="10%">Location</th>
                                        <th width="10%">Department</th>
                                        <th width="5%">Severity</th>
                                        <th width="10%">Owner</th>
                                        <th width="5%">Days</th>
                                        <th width="15%">Status Reason</th>
                                        <th width="5%">Status</th>
                                    </tr>
                                </thead>

                                <tbody id='holdticketsdata'>
                                    <tr>
                                        <td colspan="11">No Details found</td> 
                                    </tr>   
                                </tbody>
                        </table>
                    </div>

                </div>

            </div>

        </div>

    </div>
   
<!--   
    <div class="row">
        
        <div class="col-md-3">

                <div class="panel panel-default">

                    <div class="panel-heading">
                        <div class="panel-title-box">
                            <h3>Engineer Pending Tickets</h3>
                            <span>Help Desk</span>
                        </div>                                    
                        <ul class="panel-controls" style="margin-top: 2px;">
                            <li><a href="#" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>
                            <li><a href="#" class="panel-refresh"><span class="fa fa-refresh"></span></a></li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-cog"></span></a>                                        
                                <ul class="dropdown-menu">
                                    <li><a href="#" class="panel-collapse"><span class="fa fa-angle-down"></span> Collapse</a></li>
                                    <li><a href="#" class="panel-remove"><span class="fa fa-times"></span> Remove</a></li>
                                </ul>                                        
                            </li>                                        
                        </ul>
                    </div>


                    <div class="panel-body panel-body-table">

                        <div class="table-responsive">
                            <table id='engineertickets' class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th width="75%">Engineer Name</th>
                                        <th width="25%">Pending</th>
                                    </tr>
                                </thead>

                                <tbody id='engineerticketsdata'>
                                    <tr colspan="2">
                                        <td>No records found</td> 
                                    </tr>   
                                </tbody>

                            </table>
                        </div>
                        
                    </div>

                </div>

        </div> 
        
        <div class="col-md-3">

                <div class="panel panel-default">

                    <div class="panel-heading">
                        <div class="panel-title-box">
                            <h3>Engineer Tickets Daily</h3>
                            <span>Help Desk</span>
                        </div>                                    
                        <ul class="panel-controls" style="margin-top: 2px;">
                            <li><a href="#" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>
                            <li><a href="#" class="panel-refresh"><span class="fa fa-refresh"></span></a></li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-cog"></span></a>                                        
                                <ul class="dropdown-menu">
                                    <li><a href="#" class="panel-collapse"><span class="fa fa-angle-down"></span> Collapse</a></li>
                                    <li><a href="#" class="panel-remove"><span class="fa fa-times"></span> Remove</a></li>
                                </ul>                                        
                            </li>                                        
                        </ul>
                    </div>


                    <div class="panel-body panel-body-table">

                        <div class="table-responsive">
                            <table id='engineertodaytickets' class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th width="50%">Engineer Name</th>
                                        <th width="25%">Yesterday</th>
                                        <th width="25%">Today</th>
                                    </tr>
                                </thead>

                                <tbody id='engineertodayticketsdata'>
                                    <tr colspan="2">
                                        <td>No records found</td> 
                                    </tr>   
                                </tbody>

                            </table>
                        </div>
                        
                    </div>

                </div>

        </div>
        
        <div class="col-md-3">

                <div class="panel panel-default">

                    <div class="panel-heading">
                        <div class="panel-title-box">
                            <h3>Engineer Tickets Monthly</h3>
                            <span>Help Desk</span>
                        </div>                                    
                        <ul class="panel-controls" style="margin-top: 2px;">
                            <li><a href="#" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>
                            <li><a href="#" class="panel-refresh"><span class="fa fa-refresh"></span></a></li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-cog"></span></a>                                        
                                <ul class="dropdown-menu">
                                    <li><a href="#" class="panel-collapse"><span class="fa fa-angle-down"></span> Collapse</a></li>
                                    <li><a href="#" class="panel-remove"><span class="fa fa-times"></span> Remove</a></li>
                                </ul>                                        
                            </li>                                        
                        </ul>
                    </div>


                    <div class="panel-body panel-body-table">

                        <div class="table-responsive">
                            <table id='engineerlastmonthtickets' class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th width="50%">Engineer Name</th>
                                        <th width="25%">Last Month</th>
                                        <th width="25%">This Month</th>
                                    </tr>
                                </thead>

                                <tbody id='engineerlastmonthticketsdata'>
                                    <tr colspan="3">
                                        <td>No records found</td> 
                                    </tr>   
                                </tbody>

                            </table>
                        </div>
                        
                    </div>

                </div>

        </div>
        
        <div class="col-md-3">
            
            
           
        </div>
         
    </div>
    !-->
	
	<div class="row">
	
		<div class="col-md-12">

			<div class="panel panel-default">

				<div class="panel-heading">
					<div class="panel-title-box">
						<h3>Engineer Ticket Summary</h3>
						<span>Help Desk</span>
					</div>                                    
					<ul class="panel-controls" style="margin-top: 2px;">
						<li><a href="#" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>
						<li><a href="#" class="panel-refresh"><span class="fa fa-refresh"></span></a></li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-cog"></span></a>                                        
							<ul class="dropdown-menu">
								<li><a href="#" class="panel-collapse"><span class="fa fa-angle-down"></span> Collapse</a></li>
								<li><a href="#" class="panel-remove"><span class="fa fa-times"></span> Remove</a></li>
							</ul>                                        
						</li>                                        
					</ul>
				</div>


				<div class="panel-body panel-body-table">

					<div class="table-responsive">
						<table id='engineertickets' class="table table-bordered table-striped">
							<thead>
								<tr>
									<th width="25%">Engineer Name</th>
									<th width="15%">Pending</th>
									<th width="15%">Yesterday</th>
									<th width="15%">Today</th>
									<th width="15%">Last Month</th>
									<th width="15%">This Month</th>
								</tr>
							</thead>

							<tbody id='engineerticketsdata'>
								<tr colspan="6">
									<td>No records found</td> 
								</tr>   
							</tbody>

						</table>
					</div>
					
				</div>

			</div>

	</div> 
	 
	</div>
	
    <div class="row">
       
        <div class="col-md-6">
            
            <div class="panel panel-default">
                
                <div class="panel-heading">
                    
                    <div class="panel-title-box">
                        <h3>Month Wise Incident Summary</h3>
                        <span>Help Desk</span>
                    </div>   
                    
                    <ul class="panel-controls" style="margin-top: 2px;">
                        <li><a href="#" class="panel-refresh"><span class="fa fa-refresh"></span></a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-cog"></span></a>                                        
                            <ul class="dropdown-menu">
                                <li><a href="#" class="panel-collapse"><span class="fa fa-angle-down"></span> Collapse</a></li>
                                <li><a href="#" class="panel-remove"><span class="fa fa-times"></span> Remove</a></li>
                            </ul>                                        
                        </li>                                        
                    </ul>   
                    
                </div>   
                
                <div class="panel-body padding-0">
                    <div class="chart-holder" id="monthly" style="height: 250px;"></div>
                </div>
                
            </div>
            
        </div>

        <div class="col-md-3">
                            
            <div class="panel panel-default">
                <div class="panel-heading">
                    <div class="panel-title-box">
                        <h3>Incident Status Summary</h3>
                        <span>Help Desk</span>
                    </div>
                    <ul class="panel-controls" style="margin-top: 2px;">
                        <li><a href="#" class="panel-fullscreen"><span class="fa fa-expand"></span></a></li>
                        <li><a href="#" class="panel-refresh"><span class="fa fa-refresh"></span></a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-cog"></span></a>                                        
                            <ul class="dropdown-menu">
                                <li><a href="#" class="panel-collapse"><span class="fa fa-angle-down"></span> Collapse</a></li>
                                <li><a href="#" class="panel-remove"><span class="fa fa-times"></span> Remove</a></li>
                            </ul>                                        
                        </li>                                        
                    </ul>
                </div>
                <div class="panel-body padding-0">
                    <div class="chart-holder" id="incidentsummary" style="height: 250px;"></div>
                </div>
            </div>

        </div>
        
        <div class="col-md-3">
            
            <div class="panel panel-default">
                
                <div class="panel-heading">
                    
                    <div class="panel-title-box">
                        <h3>Category Wise Incident Summary</h3>
                        <span>Help Desk</span>
                    </div>   
                    
                    <ul class="panel-controls" style="margin-top: 2px;">
                        <li><a href="#" class="panel-refresh"><span class="fa fa-refresh"></span></a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-cog"></span></a>                                        
                            <ul class="dropdown-menu">
                                <li><a href="#" class="panel-collapse"><span class="fa fa-angle-down"></span> Collapse</a></li>
                                <li><a href="#" class="panel-remove"><span class="fa fa-times"></span> Remove</a></li>
                            </ul>                                        
                        </li>                                        
                    </ul>   
                    
                </div>   
                
                <div class="panel-body padding-0">
                    <div class="chart-holder" id="category" style="height: 250px;"></div>
                </div>
                
            </div>
            
        </div> 
         
    </div>
    
    
    
</div> 

<script>

var Pending_Call_Details = function () {
    
    var post_url = "<?php echo site_url() ?>/DashboardController/get_pending_incidents" 
    var dataString = ''
   
    $.ajax(
    {
        type: "POST",
        url: post_url,
        data: dataString,
        cache: false,

        success: function(Pending_Call_Details) //we're calling the response json array 'nwdevicestatus'
        {

        if((Pending_Call_Details.length) > 0)

            {  
                
               var trHTML = '';
               $('#pendingticketsdata').empty();
               
                $.each(Pending_Call_Details,function(i,Pending_Call_Details) 
                {     


                    if (Pending_Call_Details.breached_on){
                        trHTML += '<tr class="danger">';
                    }else{
                        trHTML += '<tr>';
                    }
                    
                    trHTML += '<td>' + Pending_Call_Details.incident_number + '</td><td>' + Pending_Call_Details.logged_on + '</td>';
                    trHTML += '<td>' + Pending_Call_Details.planned_resolve_on + '</td><td>' + Pending_Call_Details.logged_description + '</td>';
                    trHTML += '<td>' + Pending_Call_Details.user_name + '</td><td>' + Pending_Call_Details.location_name + '</td>';
                    trHTML += '<td>' + Pending_Call_Details.department_name + '</td><td>' + Pending_Call_Details.impact_description + '</td>';
                    trHTML += '<td>' + Pending_Call_Details.assigned_to_user + '</td><td>' + Pending_Call_Details.status_duration + '</td>';
                    
                    if (Pending_Call_Details.breached_on){
                        trHTML += '<td>' + Pending_Call_Details.status_description + '</td><td><span class="label label-danger">' + Pending_Call_Details.status + ' / Breached</td></tr>';
                    }else{
                        trHTML += '<td>' + Pending_Call_Details.status_description + '</td><td><span class="label label-danger">' + Pending_Call_Details.status + '</td></tr>';
                    }
                    
                    

                });
                
                $('#pendingtickets').append(trHTML);
            }
        } //end success

    }); //end AJAX
  
   setTimeout(Pending_Call_Details, 60000);
   
};

var Hold_Call_Details = function () {
    
    var post_url = "<?php echo site_url() ?>/DashboardController/get_hold_incidents" 
    var dataString = ''
   
    $.ajax(
    {
        type: "POST",
        url: post_url,
        data: dataString,
        cache: false,
       
        success: function(Hold_Call_Details) //we're calling the response json array 'nwdevicestatus'
        {
            
        if((Hold_Call_Details.length) > 0)

           {
                $('#holdticketsdata').empty();
                $.each(Hold_Call_Details,function(i,Hold_Call_Details) 
                {     

                    var row = $('<tr />'); // here we're creating a new select option for each group
                    $("#holdtickets").append(row)
                    row.append($("<td><strong>" + Hold_Call_Details.incident_number + "</strong></td>"));
                    row.append($("<td>" + Hold_Call_Details.logged_on + "</td>"));
                    row.append($("<td><strong>" + Hold_Call_Details.logged_description + "</strong></td>"));
                    row.append($("<td>" + Hold_Call_Details.user_name + "</td>"));
                    row.append($("<td>" + Hold_Call_Details.location_name + "</td>"));
                    row.append($("<td><strong>" + Hold_Call_Details.department_name + "</strong></td>"));
                    row.append($("<td>" + Hold_Call_Details.impact_description + "</td>"));
                    row.append($("<td>" + Hold_Call_Details.assigned_to_user + "</td>"));
                    row.append($("<td>" + Hold_Call_Details.status_duration + "</td>"));
                    row.append($("<td>" + Hold_Call_Details.status_description + "</td>"));
                    row.append($("<td><span class='label label-warning'>" + Hold_Call_Details.status + "</span></td>"));

                });
            } 
            
        } //end success
        
    }); //end AJAX
  
  
   setTimeout(Hold_Call_Details, 60000);
   
};

var Engineer_Call_Details = function () {
    
    var post_url = "<?php echo site_url() ?>/HelpdeskController/Get_Engineers_Incident_Summary" 
    var dataString = ''
    var datacount=0
    var totaldatacount=0
    
    $.ajax(
    {
        type: "POST",
        url: post_url,
        data: dataString,
        cache: false,

        success: function(Engineer_Call_Details) //we're calling the response json array 'nwdevicestatus'
        {

        totaldatacount=Engineer_Call_Details.length;
        
        if((Engineer_Call_Details.length) > 0)

            {  
               $('#engineerticketsdata').empty();
                $.each(Engineer_Call_Details,function(i,Engineer_Call_Details) 
                {     
                    
                    var row = $('<tr />'); // here we're creating a new select option for each group
                    $("#engineertickets").append(row)
                    
                    datacount++;
                    
                    if((datacount) === totaldatacount)   
                    {
                        row.append($("<td><strong>" + "Total" + "</strong></td>"));
                    }else{
                        row.append($("<td><strong>" + Engineer_Call_Details.assign_to_user_name + "</strong></td>"));
                    }

                    row.append($("<td><strong>" + Engineer_Call_Details.pending_incidents + "</strong></td>"));
					
					row.append($("<td><strong>" + Engineer_Call_Details.yesterday + "</strong></td>"));
					row.append($("<td><strong>" + Engineer_Call_Details.today + "</strong></td>"));
					
					row.append($("<td><strong>" + Engineer_Call_Details.last_month + "</strong></td>"));
					row.append($("<td><strong>" + Engineer_Call_Details.this_month + "</strong></td>"));

                });
            }
        } //end success

    }); //end AJAX
  
  
   setTimeout(Engineer_Call_Details, 60000);
   
};

var Engineer_Today_Call_Details = function () {
    
    var post_url = "<?php echo site_url() ?>/HelpdeskController/Get_Engineer_Logged_Incidents" 
    var dataString = 'dt_date=' + '<?php echo date("Y/m/d") ?>'
    var datacount=0
    var totaldatacount=0
    
    $.ajax(
    {
        type: "POST",
        url: post_url,
        data: dataString,
        cache: false,

        success: function(Engineer_Today_Call_Details) //we're calling the response json array 'nwdevicestatus'
        {
        
        totaldatacount=Engineer_Today_Call_Details.length;
        
        if((Engineer_Today_Call_Details.length) > 0)

            {  
               $('#engineertodayticketsdata').empty();
                $.each(Engineer_Today_Call_Details,function(i,Engineer_Today_Call_Details) 
                {     

                    var row = $('<tr />'); // here we're creating a new select option for each group
                    $("#engineertodaytickets").append(row)
                    
                    datacount++;
                    
                    if((datacount) === totaldatacount)   
                    {
                        row.append($("<td><strong>" + "Total" + "</strong></td>"));
                    }else{
                        row.append($("<td><strong>" + Engineer_Today_Call_Details.user_name + "</strong></td>"));
                    }
                    
                    row.append($("<td><strong>" + Engineer_Today_Call_Details.yesterday + "</strong></td>"));
                    row.append($("<td><strong>" + Engineer_Today_Call_Details.today + "</strong></td>"));

                });
            }
        } //end success

    }); //end AJAX
  
  
   setTimeout(Engineer_Today_Call_Details, 60000);
   
};

var Last_Month_Engineer_Logged_Incidents = function () {
    
    var post_url = "<?php echo site_url() ?>/HelpdeskController/Last_Month_Engineer_Logged_Incidents" 
    var dataString = ''
    var datacount=0
    var totaldatacount=0
    
    $.ajax(
    {
        type: "POST",
        url: post_url,
        data: dataString,
        cache: false,

        success: function(Last_Month_Engineer_Logged_Incidents) //we're calling the response json array 'nwdevicestatus'
        {
        
        totaldatacount=Last_Month_Engineer_Logged_Incidents.length;
        
        if((Last_Month_Engineer_Logged_Incidents.length) > 0)
        
            {  
               $('#engineerlastmonthticketsdata').empty();
                $.each(Last_Month_Engineer_Logged_Incidents,function(i,Last_Month_Engineer_Logged_Incidents) 
                {     

                    var row = $('<tr />'); // here we're creating a new select option for each group
                    $("#engineerlastmonthtickets").append(row)
                    
                    datacount++;
                    
                    if((datacount) === totaldatacount)    
                    {
                        row.append($("<td><strong>" + "Total" + "</strong></td>"));
                    }else{
                        row.append($("<td><strong>" + Last_Month_Engineer_Logged_Incidents.user_name + "</strong></td>"));
                    }
                     
                    row.append($("<td><strong>" + Last_Month_Engineer_Logged_Incidents.last_month + "</strong></td>"));
                    row.append($("<td><strong>" + Last_Month_Engineer_Logged_Incidents.this_month + "</strong></td>"));

                });
            }
        } //end success

    }); //end AJAX
  
  
   setTimeout(Last_Month_Engineer_Logged_Incidents, 60000);
   
};

var Call_Count_Summary = function () {
  
    var post_url = "<?php echo site_url() ?>/HelpdeskController/Get_Call_Status_Summary" 
    var dataString = ''

    $.ajax(
    {
        type: "POST",
        url: post_url,
        data: dataString,
        cache: false,

        success: function(callsummary) //we're calling the response json array 'callsummary'

        {

            $('#totaltitle').empty();
            $('#totalsubtitle').empty();
            $('#totaldata').empty();
            
            $('#holdtitle').empty();
            $('#holdsubtitle').empty();
            $('#holddata').empty();
            
            $('#pendingtitle').empty();
            $('#pendingsubtitle').empty();
            $('#pendingdata').empty();
            
            $('#resolvedtitle').empty();
            $('#resolvedsubtitle').empty();
            $('#resolveddata').empty();
            
            $('#todaytitle').empty();
            $('#todaysubtitle').empty();
            $('#todaydata').empty();
            
            $('#todaypendingtitle').empty();
            $('#todaypendingsubtitle').empty();
            $('#todaypendingdata').empty();
                 
            $.each(callsummary,function(i,callsummary) 
            {     
                
                document.getElementById("totaltitle").innerHTML = 'Total Tickets';
                document.getElementById("totalsubtitle").innerHTML = callsummary.Month + ' ' + callsummary.Year;
                document.getElementById("totaldata").innerHTML = callsummary.Total_Tickets;
               
                document.getElementById("holdtitle").innerHTML = 'Hold Tickets';
                document.getElementById("holdsubtitle").innerHTML = callsummary.Month + ' ' + callsummary.Year;
                document.getElementById("holddata").innerHTML = callsummary.Hold_Tickets;
                
                document.getElementById("pendingtitle").innerHTML = 'Pending Tickets';
                document.getElementById("pendingsubtitle").innerHTML = callsummary.Month + ' ' + callsummary.Year;
                document.getElementById("pendingdata").innerHTML = callsummary.Pending_Tickets;
                
                document.getElementById("resolvedtitle").innerHTML = 'Resolved Tickets';
                document.getElementById("resolvedsubtitle").innerHTML = callsummary.Month + ' ' + callsummary.Year;
                document.getElementById("resolveddata").innerHTML = callsummary.Resolved_Tickets;
                
                document.getElementById("todaytitle").innerHTML = 'Total Tickets';
                document.getElementById("todaysubtitle").innerHTML = 'Today';
                document.getElementById("todaydata").innerHTML = callsummary.Today_Total_Tickets;
                
                document.getElementById("todaypendingtitle").innerHTML = 'Pending Tickets';
                document.getElementById("todaypendingsubtitle").innerHTML = 'Today';
                document.getElementById("todaypendingdata").innerHTML = callsummary.Today_Pending_Tickets;
     
            });
        } //end success

    }); //end AJAX
  
   setTimeout(Call_Count_Summary, 60000);
   
};

var Get_Month_Wise_Incident_Summary = function () {
    
    var post_url = "<?php echo site_url() ?>/HelpdeskController/Get_Month_Wise_Incident_Summary" 
    var dataString = ''
    var chart_json_string='';
    
    $.ajax(
    {
        type: "POST",
        url: post_url,
        data: dataString,
        dataType: "json",
        cache: false,

        success: function(Month_Wise_Incident_Summary) //we're calling the response json array 'nwdevicestatus'

        {
            
            $.each(Month_Wise_Incident_Summary,function(i,Month_Wise_Incident_Summary) 
            {    
                
                chart_json_string += '{"Month":"' + Month_Wise_Incident_Summary.Month + '","Total_Incidents":' + Month_Wise_Incident_Summary.Total_Incidents + '},'

            });
                    
            chart_json_string = '[' + chart_json_string.substring(0, chart_json_string.length - 1) + ']';
            
            var acct_regs =  $.parseJSON(chart_json_string)
            
                $('#monthly').empty();
                                
                var monthly = new Morris.Bar({
                    element: 'monthly',
                    data: acct_regs,
                    xkey: 'Month',
                    ykeys: ["Total_Incidents"],
                    labels: ["Total Incidents"],
                    barColors:['#2980b9'],
                    //xLabelAngle: 20
                });
                
                      
        } //end success

    }); //end AJAX
    
       setTimeout(Get_Month_Wise_Incident_Summary, 60000);
   
};

var Get_Category_Wise_Incident_Summary = function () {
    
    var post_url = "<?php echo site_url() ?>/HelpdeskController/Get_Category_Wise_Incident_Summary" 
    var dataString = ''
    var chart_json_string='';
    
    $.ajax(
    {
        type: "POST",
        url: post_url,
        data: dataString,
        dataType: "json",
        cache: false,

        success: function(Get_Category_Wise_Incident_Summary) //we're calling the response json array 'nwdevicestatus'

        {
            
            $.each(Get_Category_Wise_Incident_Summary,function(i,Get_Category_Wise_Incident_Summary) 
            {    
                
                chart_json_string += '{"Category":"' + Get_Category_Wise_Incident_Summary.Category_Name + '","Total_Incidents":' + Get_Category_Wise_Incident_Summary.Total_Incidents + ',"Pending_Incidents":' + Get_Category_Wise_Incident_Summary.Pending_Incidents + '},'

            });
                    
            chart_json_string = '[' + chart_json_string.substring(0, chart_json_string.length - 1) + ']';

            var acct_regs =  $.parseJSON(chart_json_string)
            
                $('#category').empty();
                                
                var category = new Morris.Bar({
                    element: 'category',
                    data: acct_regs,
                    xkey: 'Category',
                    ykeys: ["Total_Incidents","Pending_Incidents"],
                    labels: ["Total Incidents","Pending Incidents"],
                    barColors:['#5195D3','#FAA43A '],

                });
                
                      
        } //end success

    }); //end AJAX
    
       setTimeout(Get_Category_Wise_Incident_Summary, 60000);
   
};

var Incident_Status_Summary = function () {
    
    var post_url = "<?php echo site_url() ?>/HelpdeskController/Get_Call_Status_Summary" 
    var dataString = ''
    var chart_json_string='';
    
    $.ajax(
    {
        type: "POST",
        url: post_url,
        data: dataString,
        dataType: "json",
        cache: false,

        success: function(Incident_Status_Summary) //we're calling the response json array 'nwdevicestatus'

            {

               $.each(Incident_Status_Summary,function(i,Incident_Status_Summary) 
                {
                    chart_json_string += '{"label":"' + "Total Tickets" + '","value":' + Incident_Status_Summary.Total_Tickets + '},'
                    chart_json_string += '{"label":"' + "Hold Tickets" + '","value":' + Incident_Status_Summary.Hold_Tickets + '},'
                    chart_json_string += '{"label":"' + "Pending Tickets" + '","value":' + Incident_Status_Summary.Pending_Tickets + '},'
                    chart_json_string += '{"label":"' + "Resolved Tickets" + '","value":' + Incident_Status_Summary.Resolved_Tickets + '},'
                });
                
                chart_json_string = '[' + chart_json_string.substring(0, chart_json_string.length - 1) + ']';
                
                var acct_regs =  $.parseJSON(chart_json_string)
               
                $('#incidentsummary').empty();

                var incidentsummary = new Morris.Donut({
                    element: 'incidentsummary',
                    data: acct_regs,
                    colors: ['#33414E','#5195D3','#F2A068','#1caf9a'],
                    resize: true
                });        

            } //end success

    }); //end AJAX
    
       setTimeout(Incident_Status_Summary, 60000);
   
};

var Get_Item_Stock_Details = function () {
    
    var post_url = "<?php echo site_url() ?>/DashboardController/get_items_stock" 
    var dataString = ''
   
    $.ajax(
    {
        type: "POST",
        url: post_url,
        data: dataString,
        cache: false,

        success: function(Item_Stock_Details) //we're calling the response json array 'nwdevicestatus'
        {

        if((Item_Stock_Details.length) > 0)

            {  
                
               var trHTML = '';
               $('#itemstockdata').empty();
               
                $.each(Item_Stock_Details,function(i,Item_Stock_Details) 
                {     

                    if (parseInt(Item_Stock_Details.item_stock) <= parseInt(Item_Stock_Details.reorder_level)){
                        trHTML += '<tr class="danger">';
                    }else{
                        trHTML += '<tr>';
                    }
                    
                    trHTML += '<td>' + Item_Stock_Details.item_id + '</td><td>' + Item_Stock_Details.item_name + '</td>';
                    trHTML += '<td>' + Item_Stock_Details.item_stock + '</td><td>' + Item_Stock_Details.reorder_level + '</td></tr>';

                });
                
                $('#itemstock').append(trHTML);
            }
        } //end success

    }); //end AJAX
  
   setTimeout(Get_Item_Stock_Details, 60000);
   
};

$(document).ready(function()

    {
       //Get_Item_Stock_Details();
       Call_Count_Summary();
       Pending_Call_Details();
       Engineer_Call_Details();
       Hold_Call_Details();
       Incident_Status_Summary();
       Get_Month_Wise_Incident_Summary();
       Get_Category_Wise_Incident_Summary();
    });
    
</script>
